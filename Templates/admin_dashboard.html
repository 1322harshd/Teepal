{% extends "base.html" %}
{% block content %}
<div style="max-width:1200px;margin:32px auto;">
    <h2>Admin Dashboard</h2>
    <h3 style="margin-top:32px;">All Orders</h3>
    <table style="width:100%;border-collapse:collapse;margin-bottom:32px;">
        <thead>
            <tr style="background:#f5f5f5;">
                <th>Order ID</th>
                <th>User</th>
                <th>Product</th>
                <th>Brand</th>
                <th>Quantity</th>
                <th>Price</th>
                <th>Ordered At</th>
                <th>Arrival Date</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr>
                <td>{{ order.OrderId }}</td>
                <td>{{ order.UserName }}</td>
                <td>{{ order.Item }}</td>
                <td>{{ order.Brand }}</td>
                <td>{{ order.Quantity }}</td>
                <td>${{ order.PriceAtPurchase }}</td>
                <td>{{ order.OrderedAt }}</td>
                <td>{{ order.ArrivalDate }}</td>
                <td>{{ order.Status }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <h3>Customisation Requests</h3>
    <table style="width:100%;border-collapse:collapse;">
        <thead>
            <tr style="background:#f5f5f5;">
                <th>Request ID</th>
                <th>User</th>
                <th>Product</th>
                <th>Custom Text</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for req in custom_requests %}
            <tr>
                <td>{{ req.RequestId }}</td>
                <td>{{ req.UserName }}</td>
                <td>{{ req.ProductName }}</td>
                <td>{{ req.CustomText }}</td>
                <td>{{ req.Status }}</td>
                <td>
                    {% if req.Status == 'pending' %}
                        <a href="{{ url_for('admin_approve_request', request_id=req.RequestId) }}" style="color:green;font-weight:bold;">Approve</a> |
                        <a href="{{ url_for('admin_reject_request', request_id=req.RequestId) }}" style="color:red;font-weight:bold;">Reject</a>
                    {% else %}
                        <span style="color:#888;">No action</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
