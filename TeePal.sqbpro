<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="TeePal.db" readonly="0" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="structure browser pragmas query" current="1"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="2204"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><table title="Users" custom_title="0" dock_id="1" table="4,5:mainUsers"/><dock_state state="000000ff00000000fd0000000100000002000004a500000390fc0100000001fb000000160064006f0063006b00420072006f00770073006500310100000000000004a50000011e00ffffff000002690000000000000004000000040000000800000008fc00000000"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="CartItems" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="72"/><column index="2" value="48"/><column index="3" value="66"/><column index="4" value="57"/><column index="5" value="57"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="OrderDetails" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="85"/><column index="2" value="54"/><column index="3" value="66"/><column index="4" value="57"/><column index="5" value="101"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Users" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="46"/><column index="2" value="63"/><column index="3" value="143"/><column index="4" value="300"/><column index="5" value="159"/><column index="6" value="111"/><column index="7" value="159"/><column index="8" value="105"/><column index="9" value="97"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="SQL 1*">-- Drop existing tables if they exist (safe reset)
DROP TABLE IF EXISTS OrderDetails;
DROP TABLE IF EXISTS Orders;
DROP TABLE IF EXISTS CartItems;
DROP TABLE IF EXISTS SavedItems;
DROP TABLE IF EXISTS Products;
DROP TABLE IF EXISTS Users;



-- Users Table
CREATE TABLE Users (
    UserId INTEGER PRIMARY KEY AUTOINCREMENT,
    Name VARCHAR(100),
    Email VARCHAR(100) NOT NULL UNIQUE,
    Password VARCHAR(255),
    CreatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    DisplayName VARCHAR(100),
    Image VARCHAR(255),
    SecurityQuestion TEXT,
    SecurityAnswer TEXT
);

-- Products Table
CREATE TABLE Products (
    ProductId INTEGER PRIMARY KEY AUTOINCREMENT,
    Item VARCHAR(100) NOT NULL,
    Brand VARCHAR(100),
    Price DECIMAL(10, 2) NOT NULL,
    Image TEXT,
    CreatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Orders Table
CREATE TABLE Orders (
    OrderId INTEGER PRIMARY KEY AUTOINCREMENT,
    UserId INTEGER,
    OrderedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (UserId) REFERENCES Users(UserId) ON DELETE SET NULL
);

-- OrderDetails Table
CREATE TABLE OrderDetails (
    OrderDetailId INTEGER PRIMARY KEY AUTOINCREMENT,
    OrderId INTEGER,
    ProductId INTEGER,
    Quantity INTEGER NOT NULL CHECK(Quantity &gt; 0),
    PriceAtPurchase DECIMAL(10, 2),
    FOREIGN KEY (OrderId) REFERENCES Orders(OrderId) ON DELETE CASCADE,
    FOREIGN KEY (ProductId) REFERENCES Products(ProductId)
);

-- CartItems Table
CREATE TABLE CartItems (
    CartItemId INTEGER PRIMARY KEY AUTOINCREMENT,
    UserId INTEGER,
    ProductId INTEGER,
    Quantity INTEGER NOT NULL CHECK(Quantity &gt; 0),
    AddedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (UserId) REFERENCES Users(UserId) ON DELETE CASCADE,
    FOREIGN KEY (ProductId) REFERENCES Products(ProductId) ON DELETE CASCADE
);

-- SavedItems Table
CREATE TABLE SavedItems (
    SavedItemId INTEGER PRIMARY KEY AUTOINCREMENT,
    UserId INTEGER,
    ProductId INTEGER,
    SavedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (UserId) REFERENCES Users(UserId) ON DELETE CASCADE,
    FOREIGN KEY (ProductId) REFERENCES Products(ProductId) ON DELETE CASCADE
);

-- Sample User
INSERT INTO Users (
    UserId, Name, Email, Password, CreatedAt, DisplayName, Image, SecurityQuestion, SecurityAnswer
) VALUES (
    1001, 'karam', 'karam@gmail.com',
    'scrypt:32768:8:1$v1eWRTMl4an7cHhE$0410bdcad723736b270c5b516b71d2a850855a0c9caa2c7f6563a5da4b578a468ae41388a49f76016aea9e12499651e009bf99b06f1bf6ef4ea1776aa47d3dd5',
    '2025-06-16 02:21:20', 'karam singh', 'karam_account.jpeg', 'pet', 'sheru'
);

-- Sample Products
INSERT INTO Products (Item, Brand, Price, Image, CreatedAt) VALUES
('T-shirt', 'abibas', 10.00, 'products/tshirt.jfif', '2025-06-11 23:05:03'),
('Mug', 'milton', 7.00, 'products/mug.jfif', '2025-06-11 23:05:03'),
('Cap', 'yankees', 5.00, 'products/cap.jfif', '2025-06-11 23:05:03'),
('Bottle', 'milton', 12.00, 'products/Unknown.jpeg', '2025-06-11 23:05:15'),
('Bag', 'wildcraft', 20.00, 'products/bag.jpeg', '2025-06-11 23:05:15'),
('Shoes', 'nike', 50.00, 'products/shoes.jpeg', '2025-06-11 23:05:15');

-- Sample Orders for User 1001
INSERT INTO Orders (OrderId, UserId, OrderedAt) VALUES
(1, 1001, '2025-06-15 10:00:00'),
(2, 1001, '2025-06-15 12:30:00'),
(3, 1001, '2025-06-15 15:45:00'),
(4, 1001, '2025-06-16 09:00:00'),
(5, 1001, '2025-06-16 11:20:00');

-- Sample OrderDetails
INSERT INTO OrderDetails (OrderId, ProductId, Quantity, PriceAtPurchase) VALUES
(1, 1, 2, 10.00),
(1, 2, 1, 7.00),
(2, 3, 3, 5.00),
(2, 4, 1, 12.00),
(3, 5, 1, 20.00),
(3, 6, 2, 50.00),
(4, 2, 2, 7.00),
(4, 1, 1, 10.00),
(5, 3, 1, 5.00),
(5, 5, 1, 20.00);

</sql><current_tab id="0"/></tab_sql></sqlb_project>
